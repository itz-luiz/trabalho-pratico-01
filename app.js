const newsDatabase = [
  {
    id: 1,
    title: "Yuki Tsunoda SUBSTITUI Liam Lawson para o GP do Japão",
    image: "imagens/redbull-formula1.png",
    excerpt:
      "Yuki Tsunoda substituirá Liam Lawson na Red Bull a partir do GP do Japão...",
    fullText: `
            <p>Yuki Tsunoda substituirá Liam Lawson na Red Bull Racing a partir do Grande Prêmio do Japão, 
            após o desempenho insatisfatório do neozelandês nas duas primeiras corridas da temporada 2025.</p>
            <p>A decisão foi anunciada nesta quarta-feira pela equipe austríaca, que busca melhorar seu 
            desempenho no campeonato de construtores.</p>
            <h2>Detalhes da Substituição</h2>
            <p>Tsunoda, que atuava como piloto reserva, terá sua primeira oportunidade como titular na 
            equipe principal. A mudança ocorre após Lawson ter terminado as duas primeiras provas fora 
            dos pontos.</p>
            <p>O japonês de 24 anos já havia impressionado durante os testes de pré-temporada, 
            mostrando boa adaptação ao novo carro da Red Bull.</p>
        `,
    date: "15/04/2025",
    category: "Esportes",
  },
  {
    id: 2,
    title: "Conheça a história do Studio Ghibli",
    image: "imagens/studio-ghibli.png",
    excerpt: "Imagens geradas pelo ChatGPT inspiradas no Studio Ghibli...",
    fullText: `
            <p>O Studio Ghibli, fundado em 1985 por Hayao Miyazaki e Isao Takahata, revolucionou a 
            animação mundial com filmes como "A Viagem de Chihiro" e "Meu Amigo Totoro".</p>
            <h2>O Fenômeno ChatGPT</h2>
            <p>Recentemente, imagens geradas pelo ChatGPT inspiradas no estilo Ghibli causaram tal 
            volume de requisições que sobrecarregaram os servidores da OpenAI.</p>
            <p>Especialistas apontam que o estilo único do estúdio, com suas paisagens detalhadas e 
            personagens expressivos, é particularmente desafiador para IAs.</p>
            <p>O próprio Miyazaki já se manifestou sobre o tema: "A animação deve vir da alma humana, 
            não de máquinas".</p>
        `,
    date: "12/04/2025",
    category: "Cultura",
  },
  {
    id: 3,
    title:
      "Fifa anuncia quase R$ 6 bilhões em premiações para o Mundial de Clubes",
    image: "imagens/mundial-de-clubes.webp",
    excerpt:
      "A FIFA anunciou US$ 1 bilhão (cerca de R$ 6 bilhões) em premiações...",
    fullText: `
            <p>A FIFA revelou nesta segunda-feira o maior pacote de premiações da história do futebol 
            de clubes, com US$ 1 bilhão (aproximadamente R$ 6 bilhões) para o Mundial de Clubes 2025.</p>
            <h2>Distribuição dos Valores</h2>
            <p>O campeão do torneio receberá US$ 120 milhões, enquanto o último colocado ainda garantirá 
            US$ 5 milhões. A competição acontecerá em julho nos Estados Unidos.</p>
            <p>"Estamos elevando o patamar do futebol de clubes mundial", declarou o presidente da FIFA.</p>
        `,
    date: "10/04/2025",
    category: "Esportes",
  },
  {
    id: 4,
    title:
      "GP do Japão de F1 2025: onde assistir, horários e programação completa",
    image: "imagens/gp-do-japao.webp",
    excerpt: "O GP do Japão de F1 2025 ocorrerá no circuito de Suzuka...",
    fullText: `
            <p>O Grande Prêmio do Japão de Fórmula 1 2025 promete emoções no icônico circuito de Suzuka.</p>
            <h2>Programação Completa</h2>
            <p><strong>Sexta-feira (21/04):</strong><br>
            - 10:00-11:30: Treino Livre 1 (BandSports)<br>
            - 14:00-15:30: Treino Livre 2 (BandSports)</p>
            <p><strong>Sábado (22/04):</strong><br>
            - 11:00-12:00: Treino Livre 3 (BandSports)<br>
            - 14:00-15:00: Classificação (Band e BandSports)</p>
            <p><strong>Domingo (23/04):</strong><br>
            - 14:00: Corrida (Band e BandSports)</p>
        `,
    date: "08/04/2025",
    category: "Esportes",
  },
  {
    id: 5,
    title: "Michelle Bolsonaro lidera disputa ao Senado no DF, diz pesquisa",
    image: "imagens/michelle-bolsonaro.png",
    excerpt:
      "Pesquisa aponta Michelle Bolsonaro liderando a disputa ao Senado no DF...",
    fullText: `
            <p>Uma pesquisa DataDF divulgada hoje mostra Michelle Bolsonaro liderando a corrida ao Senado 
            pelo Distrito Federal com 42,9% das intenções de voto.</p>
            <h2>Cenário Eleitoral</h2>
            <p>O levantamento aponta:<br>
            - Michelle Bolsonaro: 42,9%<br>
            - Ibaneis Rocha (MDB): 28,3%<br>
            - Leila do Vôlei (PDT): 18,7%<br>
            - Brancos/Nulos: 6,1%<br>
            - Outros: 4%</p>
            <p>A pesquisa ouviu 2.000 eleitores entre 5 e 7 de abril, com margem de erro de 2 pontos.</p>
        `,
    date: "05/04/2025",
    category: "Política",
  },
  {
    id: 6,
    title: "BYD supera a Tesla com vendas anuais de mais de US$ 100 bilhões",
    image: "imagens/byd.webp",
    excerpt: "A chinesa BYD superou a Tesla em vendas anuais...",
    fullText: `
            <p>A fabricante chinesa BYD reportou vendas anuais de US$ 102,4 bilhões em 2024, 
            superando a Tesla (US$ 98,7 bi) e se consolidando como líder no mercado de veículos elétricos.</p>
            <h2>Fatores do Crescimento</h2>
            <p>Analistas apontam três razões para o sucesso da BYD:<br>
            1. Linha completa de veículos acessíveis<br>
            2. Controle da cadeia de suprimentos<br>
            3. Forte apoio do governo chinês</p>
            <p>A empresa projetou crescimento de 20% para 2025, com expansão na Europa e América Latina.</p>
        `,
    date: "02/04/2025",
    category: "Economia",
  },
];

document.addEventListener("DOMContentLoaded", function () {
  if (window.location.pathname.includes("detalhes.html")) {
    loadNewsDetails();
  } else {
    loadHomePage();
  }
  document.getElementById("current-year").textContent =
    new Date().getFullYear();
});

function isDetailsPage() {
  return window.location.pathname.includes("detalhes.html");
}

function loadHomePage() {
  const container = document.getElementById("news-container");
  if (!container) return;
  container.innerHTML = "";

  newsDatabase.forEach((news) => {
    const newsElement = document.createElement("li");
    newsElement.innerHTML = `
            <div class="noticia">
                <figure>
                    <a href="detalhes.html?id=${news.id}">
                        <img src="${news.image}" alt="${news.title}" class="news-image" id="imagem-noticia">
                    </a>
                    <a class="figcaption" href="detalhes.html?id=${news.id}">
                        <figcaption>
                            <h1>${news.title}</h1>
                            <p>${news.excerpt}</p>
                            <div class="news-meta">
                                <span class="news-category">${news.category}</span>
                                <span class="news-date">${news.date}</span>
                            </div>
                        </figcaption>
                    </a>
                </figure>
            </div>
        `;
    container.appendChild(newsElement);
  });
}

function loadNewsDetails() {
  const urlParams = new URLSearchParams(window.location.search);
  const newsId = urlParams.get("id");
  const newsItem = newsDatabase.find((item) => item.id.toString() === newsId);

  if (!newsItem) {
    showError();
    return;
  }

  document.title = `${newsItem.title} | ITZ NotíciaZ`;
  document.getElementById("news-title").textContent = newsItem.title;
  document.getElementById("news-image").src = newsItem.image;
  document.getElementById("news-image").alt = newsItem.title;
  document.getElementById("news-content").innerHTML = newsItem.fullText;
  document.getElementById("news-date").textContent = newsItem.date;
  document.getElementById("news-category").textContent = newsItem.category;
}

function showError() {
  const article = document.querySelector(".detalhes-noticia");
  if (!article) return;

  article.innerHTML = `
        <div class="error-message">
            <h2>Notícia não encontrada</h2>
            <p>A notícia solicitada não existe ou foi removida.</p>
            <a href="index.html" class="button">Voltar para a página inicial</a>
        </div>
    `;
}

function formatDate(dateString) {
  return dateString;
}

// Carrosel

let slideIndex = 1;
showSlides(slideIndex);

function plusSlides(n) {
  showSlides((slideIndex += n));
}

function currentSlide(n) {
  showSlides((slideIndex = n));
}

function showSlides(n) {
  let i;
  let slides = document.getElementsByClassName("mySlides");
  let dots = document.getElementsByClassName("dot");
  if (n > slides.length) {
    slideIndex = 1;
  }
  if (n < 1) {
    slideIndex = slides.length;
  }
  for (i = 0; i < slides.length; i++) {
    slides[i].style.display = "none";
  }
  for (i = 0; i < dots.length; i++) {
    dots[i].className = dots[i].className.replace(" active", "");
  }
  slides[slideIndex - 1].style.display = "block";
  dots[slideIndex - 1].className += " active";
}

// Adicione esta função no final do seu app.js
function setupSlidesCaptions() {
  const slides = document.querySelectorAll('.mySlides');
  
// Verifique se existem slides e notícias correspondentes
  if (slides.length >= 3 && newsDatabase.length >= 3) {
    // Primeiro slide - BYD
    slides[0].querySelector('.text').innerHTML = `
      <h3>${newsDatabase[5].title}</h3>
      <p>${newsDatabase[5].excerpt}</p>
    `;
    
    // Segundo slide - GP do Japão
    slides[1].querySelector('.text').innerHTML = `
      <h3>${newsDatabase[3].title}</h3>
      <p>${newsDatabase[3].excerpt}</p>
    `;
    
    // Terceiro slide - Studio Ghibli
    slides[2].querySelector('.text').innerHTML = `
      <h3>${newsDatabase[1].title}</h3>
      <p>${newsDatabase[1].excerpt}</p>
    `;
  }
}

document.addEventListener("DOMContentLoaded", function () {
  if (window.location.pathname.includes("detalhes.html")) {
    loadNewsDetails();
  } else {
    loadHomePage();
    setupSlidesCaptions(); // Adiciona as captions aos slides
  }
  document.getElementById("current-year").textContent =
    new Date().getFullYear();
});